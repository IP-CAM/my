        {extend name="admin@public/poupbase"/}
        
        <!-- CONTENT -->
        {block name="body"}
        <div id="content" style="margin:0px 10px 5px 8px;">
            <div class="bloc" style="margin:10px 0px 0px;">
                <div class="content">
                    <form id="myform" method="post" style="margin-top:5px;" class="">
                        <fieldset>
                            <legend>{$meta_title|default=''}</legend>
                            <div class="row">
                                <label for="title" class="w140">{:lang('Adsense_title')}: <span
                                    class="required">*</span></label>
                                <input id="title" type="text" value="{$data.title}" name="title" style="width:330px;" />
                            </div>
                            
                            <div class="row bset">
                                <label for="adpostion" class="w140">{:lang('Adsensepos')}:<span class="required">*</span></label>
                                <select id="adpostion" name="adpostion" class="sel_w210">
                                    {empty name="adpostion"}
                                    <option>{:lang('Not found adpos')}</option>
                                    {else /}
                                    {volist name="adpostion" id="ps"}
                                    <option value="{$ps.id}" {eq name="data.adpostion" value="$ps.id" }selected{/eq}>
                                    {$ps.title}
                                    </option>
                                    {/volist}
                                    {/empty}
                                </select>
                            </div>
    
                            <div class="row bset">
                                <label class="w140">{:lang('Match type')}:<span class="required">*</span></label>
                                <input name="searchtype" type="radio" value="0" id="searchtype_0" {eq name="data.searchtype" value="0"}checked{/eq} {eq name="ACTION_NAME" value="add"}checked{/eq}/>
                                <label for="searchtype_0" class="w150_r_0">{:lang('Adsense rand')}</label>
    
                                <input name="searchtype" type="radio" value="1" id="searchtype_1" {eq name="data.searchtype" value="1"}checked{/eq} />
                                <label for="searchtype_1" class="w150_r_0">{:lang('Adsense accurate')}</label>
    
                                <input name="searchtype" type="radio" value="2" id="searchtype_2" {eq name="data.searchtype" value="2"}checked{/eq} />
                                <label for="searchtype_2" class="w150_r_0">{:lang('Adsense widely')}</label>
                            </div>
    
                            <div class="row">
                                <label for="searchkey" class="w140">{:lang('Adsense searchkey')}:</label>
                                <textarea name="searchkey" id="searchkey" style="resize: none; width: 400px; height: 30px;" placeholder="{:lang('Adsense searchkey pla')}">{$data.searchkey|default=''}</textarea>
                            </div>
    
                            <div class="row">
                                <label class="w140">&nbsp;</label>
                                <label class="red" style="width: 500px;">{:lang('Adsense searchkey tip')}</label>
                            </div>
                            
                            <div class="row bset">
                                <label class="w140">{:lang('Adsense_style')}:<span class="required">*</span></label>
                                {foreach name="Adsensetype" item="style"}
                                <input name="style" type="radio" value="{$key}" id="type_{$key}" {eq name="data.style"
                                       value="$key" }checked{/eq} {eq name="ACTION_NAME" value="add"}{eq name="key"
                                value="1"}checked{/eq}{/eq}/>
                                <label for="type_{$key}" class="w105_r_0">{$style}</label>
                                {/foreach}
                            </div>
                            
                            <div id="ad_image" {neq name="ACTION_NAME" value="add" } {eq name="data.style" value="1" }{else
                            /}style="display:none;"{/eq} {else /} {/neq}>
                            <div class="row">
                                <label for="image" class="w140">{:lang('Adsense_image')}</label>
                                <input type="text" name="image" id="image" style="width:400px;" value="{$data.image}"
                                       placeholder="{:lang('Adsense_image')}"/>
                            </div>
                            <div class="row">
                                <label class="w140">&nbsp;&nbsp;</label>
                                <input class="button white upload" value="{:lang('Selectoruploadimg')}" type="button"
                                       title="{:lang('Upload img and file')}" url="{:url('img',array('m' => CONTROLLER_NAME,'input' => 'image'))}" data-upload="__UPLOADS__" />
                                <input class="button white" value="{:lang('Clear')}" type="button"
                                       onClick="$('#image').val('');"/>
                            </div>
                </div>
                
                <div id="ad_flash" {eq name="data.style" value="2" }{else/}style="display:none;"{/eq}>
                <div class="row">
                    <label for="flashurl" class="w140">{:lang('Adsense_flash')}</label>
                    <input type="text" name="flashurl" id="flashurl" value="{$data.flashurl}" style="width:400px;"
                           placeholder="{:lang('Adsense_flash')}"/>
                </div>
                <div class="row">
                    <label class="w140">&nbsp;&nbsp;</label>
                    <input class="button white upload" value="{:lang('Selectoruploadflash')}" type="button"
                           title="{:lang('Upload img and file')}" url="{:url('img',array('m' => CONTROLLER_NAME,'input' => 'flashurl'))}" data-upload="__UPLOADS__" />
                    <input class="button white" value="{:lang("Clear")}" type="button" onClick=$("#flashurl").val(""); />
                </div>
            </div>
            
            <div id="ad_code" {eq name="data.style" value="3" }{else
            /}style="display:none;"{/eq}>
            <div class="row">
                <label for="code" class="w140">{:lang('Code')}</label>
                <textarea name="code" id="code" placeholder="{:lang('Code')}"
                          style="width:400px; height:52px;">{$data.code}</textarea>
            </div>
        </div>
        
        <div id="ad_text" {eq name="data.style" value="4" }{else /}style="display:none;"{/eq}>
        <div class="row">
            <label for="flashurl" class="w140">{:lang('Adsense_text')}</label>
            <input type="text" name="text" id="text" style="width:400px;" placeholder="{:lang('Adsense_text')}"/>
        </div>
        <div class="row">
            <label for+"url" class="w140">{:lang('Adsense_url')}</label>
            <input type="text" name="url" id="url" value="{$data.url}" style="width:400px;"
                   placeholder="{:lang('Adsense_url_tip')}"/>
        </div>
        </div>
        
        <div class="row">
            <div style="float:left;">
                <label for="start" class="w140">{:lang('Time_slot')}: </label>
                <input id="start" type="text" name="begin_time" class="w120l green datainput" value="{eq name=" ACTION_NAME" value="edit"}{$data.begin_time|time_format}{else /}{:time_format()}{/eq}" />
            </div>
            <div style="overflow:hidden;">
                ~
                {eq name="ACTION_NAME" value="edit"}
                <input id="end" value='{eq name="data.end_time" value="9"}9{else /}{$data.end_time|time_format}{/eq}'
                       type="text" name="end_time" class="w120l blue datainput"/>
                {else /}
                <input id="end" value="{:date('Y-m-d H:i:s', strtotime('+1 week'))}" type="text" name="end_time" class="w120l blue datainput"/>
                {/eq}
                
                <input class="button white" value="{:lang('Forever')}" type="button" id="forever" onClick="$('#end').val(9);"/>
            </div>
        </div>
        
        <div class="row">
            <div class="fl">
                <label class="w140">{:lang('Adsense_client_name')}:<span class="required">*</span></label>
                <input type="text" value="{$data.client_name}" name="client_name" placeholder="13800138000" maxlength="50" class="input w120l" />
            </div>
            <div class="fl">
                <label class="w80">{:lang('Adsense_client_mobile')}:<span class="required">*</span></label>
                <input type="text" value="{$data.client_mobile}" name="client_mobile"
                       placeholder="Steve Jobs" maxlength="50" class="input w140l" />
            </div>
        </div>
        
        <div class="row">
            <div class="fl">
                <label class="w140">{:lang('Global_adsense')}:</label>
                <div class="slideBox">
                    {eq name="ACTION_NAME" value="edit"}
                    <input id="langid" value="0" type="checkbox" name="langid" {eq name="data['langid']"
                           value="0" }checked{/eq} />
                    {else /}
                    <input id="langid" value="0" type="checkbox" name="langid" checked/>
                    {/eq}
                    <label for="langid"></label>
                </div>
            </div>
    
            <div class="fl">
                <label class="w100">{:lang('Is_recommend')}:</label>
                <div class="slideBox">
                    {eq name="ACTION_NAME" value="edit"}
                    <input id="isrecommend" value="1" type="checkbox" name="isrecommend" {eq name="data['isrecommend']"
                           value="1" }checked{/eq} />
                    {else /}
                    <input id="isrecommend" value="0" type="checkbox" name="isrecommend" />
                    {/eq}
                    <label for="isrecommend"></label>
                </div>
            </div>
    
            <div class="fl">
                <label class="w100">{:lang('Is_top')}:</label>
                <div class="slideBox">
                    {eq name="ACTION_NAME" value="edit"}
                    <input id="istop" value="0" type="checkbox" name="istop" {eq name="data['istop']"
                           value="1" }checked{/eq} />
                    {else /}
                    <input id="istop" value="0" type="checkbox" name="istop"  />
                    {/eq}
                    <label for="istop"></label>
                </div>
            </div>
        </div>
    
        <div class="row">
            <label class="w140">{:lang('Status')}:</label>
            <div class="slideBox">
                {eq name="ACTION_NAME" value="edit"}
                <input id="status" value="1" type="checkbox" name="status" {eq name="data['status']" value="1"}checked{/eq} />
                {else /}
                <input id="status" value="1" type="checkbox" name="status" checked />
                {/eq}
                <label for="status"></label>
            </div>
            <div style="float:left; margin-left:10px;">
                <a class="tooltip-icon" title="{:lang('Status_tip')}"></a>
            </div>
        </div>
        
        <div class="buttons-wrapper bw-bottom" style="margin:10px auto 2px; text-align:center;">
            {eq name="ACTION_NAME" value="edit"}
            <input name="submit" value="{:lang('Update')}" type="submit" url="{:url('savedata')}">
            <input name="id" type="hidden" value="{$data.id}"/>
            {else /}
            <input name="submit" value="{:lang('Create')}" type="submit" url="{:url('savedata')}">>
            {/eq}
            <input name="reset" class="button white" value="{:lang('Cancel')}" type="reset">
        </div>
        </fieldset>
        </form>
        </div>
        </div>
        </div>
        {/block}
        
        {block name="js"}
        <link rel="stylesheet" type="text/css" href="__STATIC__/inputTag/jquery.tagsinput.css" />
        <style>
            div.tagsinput span.tag{
                border: 1px solid #d3d3d3;
                color: #126105;
                background: #d3d3d3;
                border-radius: 10px;
                font-weight: bolder;
            }
        </style>
        <script type="text/javascript" src="__STATIC__/inputTag/jquery.tagsinput.js"></script>
        <script>
            $(function () {
                $(".bset").buttonset();

                $('#searchkey').tagsInput({
                    width: '440px',
                    height: '40px',
                    defaultText:'{:lang("Add new keyword")}',
                });
                
                $("#start").datetimepicker({
                    dateFormat: "{:config('kernel.timeformat')}",
                    minDate: new Date(),
                    onSelect: function (dateText, inst) {
                        $.datepicker.regional["{:config('kernel.localdate')}"];
                        $("#end").datepicker("option", "minDate", dateText);
                        $("#end").focus();
                    }
                });
                $("#end").datetimepicker({
                    dateFormat: "{:config('kernel.timeformat')}",
                    minDate: +6,
                    onSelect: function (dateText, inst) {
                        $.datepicker.regional["{:config('kernel.localdate')}"];
                        $("#start").datepicker("option", "maxDate", dateText);
                    }
                });
        
                $(':input[name="style"]').click(function () {
                    var style = parseInt($(this).val());
                    switch (style) {
                        case 1:
                            $("#ad_image").show();
                            $("#ad_flash").hide();
                            $("#ad_code").hide();
                            $("#ad_text").hide();
                            break;
                        case 2:
                            $("#ad_image").hide();
                            $("#ad_flash").show();
                            $("#ad_code").hide();
                            $("#ad_text").hide();
                            break;
                        case 3:
                            $("#ad_image").hide();
                            $("#ad_flash").hide();
                            $("#ad_code").show();
                            $("#ad_text").hide();
                            break;
                        case 4:
                            $("#ad_image").hide();
                            $("#ad_flash").hide();
                            $("#ad_code").hide();
                            $("#ad_text").show();
                            break;
                    }
                })
            })
        </script>
        {/block}
